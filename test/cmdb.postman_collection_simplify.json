[
  {
    "name": "query warehouse",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/wareHouses"
  },
  {
    "name": "delete incident flow 3",
    "method": "DELETE",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/processFlows/{{incident_flow_3_id}}"
  },
  {
    "name": "query physical server by uuid",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems/{{physical_server_id}}"
  },
  {
    "name": "add operating system ubuntu",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Software",
        "fields": {
          "name": "ubuntu",
          "description": "ubuntu",
          "subtype": "OperatingSystem"
        }
      }
    }
  },
  {
    "name": "query Cabinets",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cabinets"
  },
  {
    "name": "query it service groups by keyword",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/group?keyword=Messaging"
  },
  {
    "name": "delete already referenced email service fail",
    "method": "DELETE",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service/{{service_email_id}}"
  },
  {
    "name": "add operating system winxp",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Software",
        "fields": {
          "name": "windows xp",
          "description": "Microsoft Windows XP",
          "subtype": "OperatingSystem"
        }
      }
    }
  },
  {
    "name": "query ConfigurationItems by subcategory",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems?subcategory=PhysicalServer,VirtualServer"
  },
  {
    "name": "query cfgitem by uuid ",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems/{{router_id}}"
  },
  {
    "name": "query server room",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/serverRooms"
  },
  {
    "name": "query Asset Hierarchy",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems/categories/Asset"
  },
  {
    "name": "add incident flow 2 reference incident flow 1",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/processFlows",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "IncidentFlow",
        "fields": {
          "it_service": [
            "{{service_dns_id}}"
          ],
          "committer": "{{auth_user_id}}",
          "executor": "{{auth_user_id}}",
          "reference_kb": "{{article_uuids}}",
          "reference_process_flow": [
            "{{incident_flow_1_id}}"
          ],
          "status": "open"
        }
      }
    }
  },
  {
    "name": "query ConfigurationItems",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems"
  },
  {
    "name": "add ITService Email",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ITService",
        "fields": {
          "name": "email",
          "description": "email",
          "group": "Messaging"
        }
      }
    }
  },
  {
    "name": "add test",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "test",
        "fields": {
          "name": "test",
          "it_service": [
            "{{service_dns_id}}"
          ],
          "responsibility": "{{auth_user_id}}",
          "sn": "123456",
          "model": "b10",
          "product_date": "2016-10-11",
          "warranty_expiration_date": "2016-11-11",
          "asset_location": {
            "status": "on_shelf",
            "shelf": "{{shelf_id}}",
            "label": "label",
            "other": "other"
          },
          "a": {
            "b": 1
          }
        }
      }
    }
  },
  {
    "name": "query all it service groups",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/group"
  },
  {
    "name": "add warehouse",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/wareHouses",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "WareHouse",
        "fields": {
          "name": "warehouse",
          "description": "warehouse"
        }
      }
    }
  },
  {
    "name": "add incident flow 1",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/processFlows",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "IncidentFlow",
        "fields": {
          "it_service": [
            "{{service_email_id}}",
            "{{service_pop3_id}}"
          ],
          "committer": "{{auth_user_id}}",
          "executor": "{{auth_user_id}}",
          "reference_kb": "{{article_uuids}}",
          "status": "open"
        }
      }
    }
  },
  {
    "name": "get articles from kb api",
    "method": "GET",
    "url": "http://{{kb_api_host}}:{{kb_api_port}}/KB/API/v1/articles?token={{token}}"
  },
  {
    "name": "patch incident flow 1 status to solved",
    "method": "PATCH",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/processFlows/{{incident_flow_1_id}}",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "IncidentFlow",
        "fields": {
          "status": "solved"
        }
      }
    }
  },
  {
    "name": "search it service by group id",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service?search={{group_infrastructure_id}}"
  },
  {
    "name": "add firewall",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Firewall",
        "fields": {
          "name": "firewall",
          "it_service": [
            "{{service_dns_id}}"
          ],
          "responsibility": "{{auth_user_id}}",
          "sn": "123456",
          "model": "b10",
          "product_date": "2016-10-11",
          "warranty_expiration_date": "2016-11-11",
          "asset_location": {
            "status": "on_shelf",
            "shelf": "{{shelf_id}}",
            "label": "label",
            "other": "other"
          }
        }
      }
    }
  },
  {
    "name": "patch router with it_service",
    "method": "PATCH",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems/{{router_id}}",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Router",
        "fields": {
          "it_service": [
            "{{service_pop3_id}}",
            "{{service_dns_id}}"
          ],
          "sn": "12345678",
          "responsibility": "{{auth_user_id}}"
        }
      }
    }
  },
  {
    "name": "add virtual server",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "VirtualServer",
        "fields": {
          "name": "virtualserver",
          "it_service": [
            "{{service_email_id}}",
            "{{service_pop3_id}}"
          ],
          "ip_address": [
            "192.168.0.108"
          ],
          "technical_support_info": "010-123456",
          "operating_system": "windows xp",
          "applications": [
            "反垃圾邮件网关"
          ],
          "storage_info": "hp-disk1",
          "model": "b10",
          "product_date": "2016-10-11",
          "warranty_expiration_date": "2016-11-11",
          "management_ip": [
            "192.168.0.108"
          ],
          "monitored": true,
          "host_server": "physicalserver"
        }
      }
    }
  },
  {
    "name": "clear all items in db",
    "method": "DELETE",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/items"
  },
  {
    "name": "patch incident flow 1 status to closed",
    "method": "PATCH",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/processFlows/{{incident_flow_1_id}}",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "IncidentFlow",
        "fields": {
          "status": "closed"
        }
      }
    }
  },
  {
    "name": "patch physical server with os",
    "method": "PATCH",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems/{{physical_server_id}}",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "PhysicalServer",
        "fields": {
          "it_service": [
            "{{service_pop3_id}}",
            "{{service_dns_id}}"
          ],
          "sn": "12345678",
          "responsibility": "{{auth_user_id}}",
          "operating_system": "ubuntu"
        }
      }
    }
  },
  {
    "name": "search it service by group name",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service?search=Messaging"
  },
  {
    "name": "add physical server",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "PhysicalServer",
        "fields": {
          "name": "physicalserver",
          "it_service": [
            "{{service_email_id}}",
            "{{service_pop3_id}}"
          ],
          "ip_address": [
            "192.168.0.108"
          ],
          "technical_support_info": "010-123456",
          "operating_system": "windows xp",
          "storage_info": "hp-disk1",
          "model": "b10",
          "product_date": "2016-10-11",
          "warranty_expiration_date": "2016-11-11",
          "asset_location": {
            "status": "on_shelf",
            "shelf": "shelf",
            "label": "label",
            "other": "other"
          },
          "management_ip": [
            "192.168.0.108"
          ],
          "monitored": true
        }
      }
    }
  },
  {
    "name": "login",
    "method": "POST",
    "url": "http://{{auth_api_host}}:{{auth_api_port}}/auth/login",
    "body": {
      "username": "{{auth_user}}",
      "password": "{{auth_passwd}}"
    }
  },
  {
    "name": "add ITService Pop3",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ITService",
        "fields": {
          "name": "pop3",
          "description": "pop3",
          "group": "{{group_messaging_id}}",
          "parent": "{{service_email_id}}"
        }
      }
    }
  },
  {
    "name": "query json schema of router ",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/schema/Router"
  },
  {
    "name": "query process flow by uuid",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/processFlows/{{incident_flow_1_id}}"
  },
  {
    "name": "patch ITService Dns",
    "method": "PATCH",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service/{{service_dns_id}}",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ITService",
        "fields": {
          "description": "dns2",
          "group": "Infrastructure"
        }
      }
    }
  },
  {
    "name": "query ConfigurationItem Category advanced",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems/categories/advanced/Software"
  },
  {
    "name": "get license",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/license"
  },
  {
    "name": "query it service groups related cmdb servers",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems?cfgHostsByITServiceGroup=Messaging"
  },
  {
    "name": "add ITService Dns",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ITService",
        "fields": {
          "name": "dns",
          "description": "dns",
          "group": "{{group_infrastructure_id}}",
          "dependendents": [
            "email"
          ]
        }
      }
    }
  },
  {
    "name": "query it service by uuids",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service?uuids={{service_email_id}},{{service_pop3_id}}"
  },
  {
    "name": "query it service related cmdb servers",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems?cfgHostsByITService=email"
  },
  {
    "name": "add switch",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Switch",
        "fields": {
          "name": "switch",
          "it_service": [
            "{{service_dns_id}}"
          ],
          "responsibility": "{{auth_user_id}}",
          "sn": "123456",
          "model": "a10",
          "product_date": "2016-10-11",
          "warranty_expiration_date": "2016-11-11",
          "asset_location": {
            "status": "mounted",
            "u": 42,
            "date_mounted": "2016-06-28",
            "cabinet": "{{cabinet_id}}"
          }
        }
      }
    }
  },
  {
    "name": "query ConfigurationItem mounted",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems?mounted_rels=true"
  },
  {
    "name": "search configurationItem",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/search/cfgItems?page=1&per_page=10",
    "body": {
      "body": {
        "query": {
          "bool": {
            "must": [
              {
                "match": {
                  "category": "Router"
                }
              },
              {
                "match": {
                  "status.status": "In_Use"
                }
              }
            ]
          }
        },
        "sort": [
          {
            "product_date": {
              "order": "desc"
            }
          }
        ]
      }
    }
  },
  {
    "name": "add router",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Router",
        "fields": {
          "name": "router",
          "status": {
            "status": "In_Use",
            "fields": {
              "a": 1
            }
          },
          "it_service": [
            "dns"
          ],
          "responsibility": "{{auth_user_id}}",
          "sn": "123456",
          "model": "a10",
          "product_date": "2016-08-11",
          "warranty_expiration_date": "2016-11-11",
          "asset_location": {
            "status": "mounted",
            "u": 42,
            "date_mounted": "2016-06-28",
            "cabinet": "cabinet",
            "test": "test"
          },
          "geo_location": {
            "name": "beijing",
            "location": {
              "lat": 39.98,
              "lon": 116.3
            }
          },
          "used_by_user": {
            "dn": "cn=ron yang,ou=users,dc=test,dc=com",
            "uidNumber": "1000",
            "uid": "ryang"
          },
          "used_by_dept": {
            "dn": "ou=groups,dc=test,dc=com",
            "ou": "groups"
          }
        }
      }
    }
  },
  {
    "name": "add incident flow 3 with it_service empty",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/processFlows",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "IncidentFlow",
        "fields": {
          "it_service": [],
          "status": "open"
        }
      }
    }
  },
  {
    "name": "query all it service",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service"
  },
  {
    "name": "add ServiceGroup Messaging",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/group",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ITServiceGroup",
        "fields": {
          "name": "Messaging",
          "description": "Messaging"
        }
      }
    }
  },
  {
    "name": "query cabinet by uuid as name",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cabinets/cabinet"
  },
  {
    "name": "add shelf",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/shelves",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Shelf",
        "fields": {
          "name": "shelf",
          "description": "shelf",
          "warehouse_id": "warehouse"
        }
      }
    }
  },
  {
    "name": "query operating systems",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems?subcategory=OperatingSystem"
  },
  {
    "name": "add ITService Email With Name Conflict",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ITService",
        "fields": {
          "name": "email",
          "description": "email",
          "group": "{{group_messaging_id}}"
        }
      }
    }
  },
  {
    "name": "add cabinet ",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cabinets",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Cabinet",
        "fields": {
          "name": "cabinet",
          "description": "cabinet",
          "server_room_id": "{{server_room_id}}"
        }
      }
    }
  },
  {
    "name": "search it service by name",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/service?search=email,pop3"
  },
  {
    "name": "add schemas",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/schema",
    "body": {
      "token": "{{token}}",
      "data": [
        {
          "id": "User",
          "type": "object",
          "properties": {
            "alias": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "lang": {
              "type": "string"
            },
            "surname": {
              "type": "string"
            },
            "type": {
              "type": "integer"
            },
            "attempt_ip": {
              "type": "string"
            },
            "userid": {
              "type": "integer"
            },
            "theme": {
              "type": "string"
            },
            "passwd": {
              "type": "string"
            }
          },
          "category": "auxiliary",
          "route": "/users"
        },
        {
          "id": "ServerRoom",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "name"
          ],
          "category": "auxiliary",
          "route": "/serverRooms"
        },
        {
          "id": "WareHouse",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "name"
          ],
          "category": "auxiliary",
          "route": "/wareHouses"
        },
        {
          "id": "Shelf",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "warehouse_id": {
              "type": "string",
              "schema": "WareHouse",
              "relationship": {
                "name": "LocatedAt"
              }
            }
          },
          "required": [
            "name",
            "warehouse_id"
          ],
          "category": "auxiliary",
          "route": "/shelves"
        },
        {
          "id": "Cabinet",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "server_room_id": {
              "type": "string",
              "schema": "ServerRoom",
              "relationship": {
                "name": "LocatedAt"
              }
            }
          },
          "required": [
            "name",
            "server_room_id"
          ],
          "category": "auxiliary",
          "route": "/cabinets"
        },
        {
          "id": "ITServiceGroup",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "name"
          ],
          "category": "auxiliary",
          "route": "/it_services/group"
        },
        {
          "id": "ITService",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "group": {
              "type": "string",
              "schema": "ITServiceGroup",
              "relationship": {
                "name": "BelongsTo"
              }
            },
            "dependendents": {
              "type": "array",
              "items": {
                "type": "string",
                "schema": "ITService",
                "relationship": {
                  "name": "DependsOn",
                  "reverse": true
                }
              }
            },
            "dependencies": {
              "type": "array",
              "items": {
                "type": "string",
                "schema": "ITService",
                "relationship": {
                  "name": "DependsOn"
                }
              }
            },
            "children": {
              "type": "array",
              "items": {
                "type": "string",
                "schema": "ITService",
                "relationship": {
                  "name": "ParentOf"
                }
              }
            },
            "parent": {
              "type": "string",
              "schema": "ITService",
              "relationship": {
                "name": "ParentOf",
                "reverse": true
              }
            }
          },
          "required": [
            "name"
          ],
          "category": "auxiliary",
          "route": "/it_services/service"
        },
        {
          "id": "ConfigurationItem",
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "it_service": {
              "type": "array",
              "items": {
                "type": "string",
                "schema": "ITService",
                "relationship": {
                  "name": "SUPPORT_SERVICE"
                }
              },
              "uniqueItems": true
            },
            "monitored": {
              "type": "boolean",
              "default": false
            },
            "responsibility": {
              "type": "integer",
              "schema": "User",
              "relationship": {
                "name": "RESPONSIBLE_FOR",
                "reverse": true
              }
            },
            "technical_support_info": {
              "type": "string"
            },
            "status": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string"
                }
              }
            },
            "used_by_user": {
              "type": "object",
              "properties": {
                "dn": {
                  "type": "string"
                }
              }
            },
            "used_by_dept": {
              "type": "object",
              "properties": {
                "dn": {
                  "type": "string"
                }
              }
            }
          },
          "required": [
            "name"
          ],
          "route": "/cfgItems",
          "searchable": {
            "index": "cmdb"
          }
        },
        {
          "id": "Asset",
          "allOf": [
            {
              "$ref": "ConfigurationItem"
            },
            {
              "properties": {
                "geo_location": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "location": {
                      "type": "object",
                      "properties": {
                        "lat": {
                          "type": "number"
                        },
                        "lon": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        {
          "id": "Hardware",
          "allOf": [
            {
              "$ref": "Asset"
            },
            {
              "properties": {
                "asset_id": {
                  "type": "string"
                },
                "sn": {
                  "type": "string"
                },
                "asset_location": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "mounted",
                        "unmounted",
                        "on_shelf",
                        "other"
                      ]
                    },
                    "cabinet": {
                      "type": "string",
                      "schema": "Cabinet",
                      "relationship": {
                        "name": "LOCATED",
                        "parentObjectAsRelProperty": true
                      }
                    },
                    "date_mounted": {
                      "type": "string",
                      "format": "date"
                    },
                    "u": {
                      "type": "integer"
                    },
                    "shelf": {
                      "type": "string",
                      "schema": "Shelf",
                      "relationship": {
                        "name": "LOCATED",
                        "parentObjectAsRelProperty": true
                      }
                    },
                    "label": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "status"
                  ]
                },
                "model": {
                  "type": "string"
                },
                "product_date": {
                  "type": "string",
                  "format": "date"
                },
                "warranty_expiration_date": {
                  "type": "string",
                  "format": "date"
                },
                "retirement_date": {
                  "type": "string",
                  "format": "date"
                }
              }
            }
          ],
          "required": [
            "model",
            "product_date"
          ]
        },
        {
          "id": "Storage",
          "allOf": [
            {
              "$ref": "Hardware"
            }
          ]
        },
        {
          "id": "Camera",
          "allOf": [
            {
              "$ref": "Hardware"
            }
          ]
        },
        {
          "id": "NetworkDevice",
          "allOf": [
            {
              "$ref": "Hardware"
            },
            {
              "properties": {
                "ip_address": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "format": "ipv4"
                  }
                }
              }
            }
          ]
        },
        {
          "id": "Firewall",
          "allOf": [
            {
              "$ref": "NetworkDevice"
            }
          ]
        },
        {
          "id": "Router",
          "allOf": [
            {
              "$ref": "NetworkDevice"
            }
          ]
        },
        {
          "id": "Switch",
          "allOf": [
            {
              "$ref": "NetworkDevice"
            }
          ]
        },
        {
          "id": "AbstractServer",
          "allOf": [
            {
              "$ref": "Asset"
            },
            {
              "properties": {
                "ip_address": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "format": "ipv4"
                  }
                },
                "operating_system": {
                  "type": "string",
                  "schema": "Software",
                  "relationship": {
                    "name": "RUNS_ON",
                    "reverse": true
                  }
                },
                "applications": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "schema": "Software",
                    "relationship": {
                      "name": "RUNS_ON",
                      "reverse": true
                    }
                  },
                  "uniqueItems": true
                },
                "storage_info": {
                  "type": "string"
                },
                "hardware_info": {
                  "type": "string"
                }
              }
            }
          ],
          "required": [
            "ip_address",
            "operating_system"
          ]
        },
        {
          "id": "PhysicalServer",
          "allOf": [
            {
              "$ref": "AbstractServer"
            },
            {
              "$ref": "Hardware"
            },
            {
              "properties": {
                "management_ip": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          ]
        },
        {
          "id": "VirtualServer",
          "allOf": [
            {
              "$ref": "AbstractServer"
            },
            {
              "properties": {
                "host_server": {
                  "type": "string",
                  "schema": "PhysicalServer",
                  "relationship": {
                    "name": "HOSTED_ON"
                  }
                }
              }
            }
          ],
          "required": [
            "storage_info"
          ]
        },
        {
          "id": "Software",
          "allOf": [
            {
              "$ref": "Asset"
            },
            {
              "properties": {
                "subtype": {
                  "type": "string",
                  "minLength": 1
                }
              }
            }
          ],
          "required": [
            "subtype"
          ]
        },
        {
          "id": "ProcessFlow",
          "type": "object",
          "properties": {
            "it_service": {
              "type": "array",
              "items": {
                "type": "string",
                "schema": "ITService",
                "relationship": {
                  "name": "SUPPORT_SERVICE"
                }
              },
              "uniqueItems": true
            },
            "reference_process_flow": {
              "type": "array",
              "items": {
                "type": "string",
                "schema": "ProcessFlow",
                "relationship": {
                  "name": "REFERENCED_PROCESSFLOW"
                }
              },
              "uniqueItems": true
            },
            "reference_kb": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "uniqueItems": true
            },
            "committer": {
              "type": "integer",
              "schema": "User",
              "relationship": {
                "name": "COMMITTED_BY",
                "reverse": true
              }
            },
            "executor": {
              "type": "integer",
              "schema": "User",
              "relationship": {
                "name": "EXECUTED_BY",
                "reverse": true
              }
            },
            "status": {
              "type": "string",
              "enum": [
                "open",
                "closed",
                "solved",
                "cancelled"
              ]
            },
            "note": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "attachment": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "pfid": {
              "type": "string"
            },
            "user_affected": {
              "type": "string"
            }
          },
          "required": [
            "it_service"
          ],
          "route": "/processFlows",
          "searchable": {
            "index": "processflow"
          }
        },
        {
          "id": "IncidentFlow",
          "allOf": [
            {
              "$ref": "ProcessFlow"
            },
            {
              "properties": {
                "user_affected": {
                  "type": "string"
                }
              }
            }
          ]
        }
      ]
    }
  },
  {
    "name": "add ServiceGroup Infrastructure",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/it_services/group",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ITServiceGroup",
        "fields": {
          "name": "Infrastructure",
          "description": "Infrastructure"
        }
      }
    }
  },
  {
    "name": "query ConfigurationItems paginated",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems?page=1&per_page=2"
  },
  {
    "name": "add server_room",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/serverRooms",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "ServerRoom",
        "fields": {
          "name": "server_room",
          "description": "server_room"
        }
      }
    }
  },
  {
    "name": "query softwares",
    "method": "GET",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems?subcategory=Software"
  },
  {
    "name": "add application",
    "method": "POST",
    "url": "http://{{cmdb_api_host}}:{{cmdb_api_port}}/api/cfgItems",
    "body": {
      "token": "{{token}}",
      "data": {
        "category": "Software",
        "fields": {
          "subtype": "AntispamGateway",
          "name": "反垃圾邮件网关",
          "provider": "网际思安",
          "version": "1234",
          "key": "1234",
          "quantity": 1,
          "contact_id": "1234",
          "status": {
            "status": "In_Use",
            "fields": {
              "a": 1
            }
          },
          "it_service": [
            "email"
          ],
          "responsibility": "{{auth_user_id}}",
          "sn": "123456",
          "product_date": "2016-08-11",
          "warranty_expiration_date": "2016-11-11"
        }
      }
    }
  }
]
